import streamlit as st
import pandas as pd
from datetime import date, datetime
import math
import gspread
from oauth2client.service_account import ServiceAccountCredentials

# ==========================================
# ğŸ”’ å®‰å…¨é–
# ==========================================
def check_password():
    if "password_correct" not in st.session_state:
        st.session_state.password_correct = False
    if not st.session_state.password_correct:
        st.title("ğŸ”’ è«‹ç™»å…¥æ–°ç”Ÿç®¡ç†ç³»çµ±")
        password = st.text_input("è«‹è¼¸å…¥é€šé—œå¯†ç¢¼", type="password")
        if st.button("ç™»å…¥"):
            if password == "1234": 
                st.session_state.password_correct = True
                st.rerun()
            else:
                st.error("å¯†ç¢¼éŒ¯èª¤")
        return False
    return True

if not check_password():
    st.stop()

# ==========================================
# âš™ï¸ è¨­å®šèˆ‡é€£ç·š
# ==========================================
SHEET_NAME = 'kindergarten_db'
STUDENT_CSV = 'students.csv'

def connect_to_gsheets():
    scope = ['https://spreadsheets.google.com/feeds', 'https://www.googleapis.com/auth/drive']
    creds_dict = dict(st.secrets["gcp_service_account"])
    creds = ServiceAccountCredentials.from_json_keyfile_dict(creds_dict, scope)
    client = gspread.authoriz
